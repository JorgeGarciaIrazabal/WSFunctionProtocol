<!DOCTYPE html>
<html>
<head>
    <title>tornado WebSocket example</title>
    <script type="text/javascript" src="static/tornadoProtocol.js"></script>
</head>
<body>
<div class="container">
    <h1>tornado WebSocket example with WSFunctionProtocol</h1>
    <hr>
    WebSocket status : <span id="message">"Waiting connection</span>
</div>


    <script>
    $tornadoInit(12345)
    //$tornado.TestClass.client.test = 6
    $tornado.client.TestClass.onTest = function(a,b){
        alert("OnTest")
    }
    //alert($tornado.client["TestClass"]["test"])
    $tornado.onopen = function(){
        document.getElementById("message").innerHTML = "Connected"
      $tornado.server.TestClass.tast(1,2,3).done(function(data){
        console.log(data)
      }, function(error){
        console.log("Error on - " + error)
      });
      /*
      $tornado.server.TestClass.tast(1,2,3).done(function(data){
        console.log(data)
      }, function(error){
      console.log("Error on - " + error)
      });
      $tornado.server.TestClass.tast(1,2,3).done(function(data){
        console.log(data)
      }, function(error){
      console.log("Error on - " + error)
      });*/
    };

    $tornado.onclose = function(ev){
        document.getElementById("message").innerHTML = "Closed"
     console.log("OnClose")
    };
    $tornado.onerror = function(ev){
      alert(ev)
    };


</script>
</body>
</html>
